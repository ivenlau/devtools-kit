@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    /* 主色调 */
    --primary-50: #E8F4FF;
    --primary-100: #D1E9FF;
    --primary-200: #A6D4FF;
    --primary-300: #76B9FF;
    --primary-400: #4A9EFF;
    --primary-500: #1E84FF;
    --primary-600: #0069E0;
    --primary-700: #0052B3;
    --primary-800: #003D87;
    --primary-900: #002A5C;

    /* 中性色 */
    --gray-0: #FFFFFF;
    --gray-25: #FAFAFA;
    --gray-50: #F5F5F5;
    --gray-100: #E8E8E8;
    --gray-200: #D4D4D4;
    --gray-300: #A3A3A3;
    --gray-400: #737373;
    --gray-500: #525252;
    --gray-600: #404040;
    --gray-700: #262626;
    --gray-800: #171717;
    --gray-900: #0A0A0A;

    /* 语法高亮色 */
    --syntax-red: #FF5C5C;
    --syntax-orange: #FFB86C;
    --syntax-yellow: #F1FA8C;
    --syntax-green: #50FA7B;
    --syntax-cyan: #8BE9FD;
    --syntax-blue: #6272A4;
    --syntax-purple: #BD93F9;
    --syntax-pink: #FF79C6;
  }

  * {
    border-color: rgb(229 231 235);
  }

  body {
    @apply bg-white text-gray-900;
    font-feature-settings: "rlig" 1, "calt" 1;
  }
}

/* Dark mode */
@media (prefers-color-scheme: dark) {
  :root {
    --gray-0: #0A0A0A;
    --gray-25: #141414;
    --gray-50: #1E1E1E;
    --gray-100: #2D2D2D;
    --gray-200: #404040;
    --gray-300: #525252;
    --gray-400: #A3A3A3;
    --gray-500: #D4D4D4;
    --gray-600: #E8E8E8;
    --gray-700: #F5F5F5;
    --gray-800: #FAFAFA;
    --gray-900: #FFFFFF;
  }
}

/* Class-based dark mode (overrides) */
.dark {
  color-scheme: dark;
}

.dark body {
  @apply bg-gray-900 text-gray-100;
}

/* Improve text contrast in dark mode */
.dark .text-gray-400 {
  color: rgb(156 163 175) !important; /* Better contrast */
}

.dark .text-gray-500 {
  color: rgb(156 163 175) !important; /* gray-500 → gray-400 for better visibility */
}

.dark .text-gray-600 {
  color: rgb(209 213 219) !important; /* gray-600 → gray-300 for better visibility */
}

/* Ensure all text inputs have good contrast */
.dark input,
.dark textarea,
.dark select {
  @apply text-gray-100;
}

.dark input::placeholder,
.dark textarea::placeholder {
  color: rgb(107 114 128) !important; /* gray-500 */
}

/* Better border contrast in dark mode */
.dark .border-gray-200 {
  border-color: rgb(55 65 81) !important;
}

.dark .border-gray-300 {
  border-color: rgb(75 85 99) !important;
}

/* Code blocks in dark mode */
.dark pre,
.dark code {
  @apply text-gray-100;
}

/* Button text contrast */
.dark button {
  @apply text-gray-100;
}

.dark button.text-gray-600 {
  @apply !text-gray-300;
}

.dark button.text-gray-500 {
  @apply !text-gray-300;
}

.dark button.text-gray-400 {
  @apply !text-gray-300;
}

/* Labels and descriptions */
.dark label,
.dark .text-sm,
.dark .text-xs {
  color: rgb(209 213 219) !important;
}

.dark .text-gray-700 {
  color: rgb(243 244 246) !important; /* gray-700 → gray-100 */
}

/* ============================================
   Markdown Preview Styles
   增强的 Markdown 预览样式，提供清晰的视觉区分
   ============================================ */

.markdown-preview {
  @apply text-gray-900 dark:text-gray-100;
  line-height: 1.75;
}

/* 标题样式 - 清晰的层次结构 */
.markdown-preview h1 {
  @apply text-3xl font-bold border-b-2 border-gray-300 dark:border-gray-600 pb-3 mb-6 mt-8 first:mt-0;
  color: rgb(17 24 39); /* gray-900 */
}

.markdown-preview h2 {
  @apply text-2xl font-bold border-b border-gray-200 dark:border-gray-700 pb-2 mb-4 mt-6 first:mt-0;
  color: rgb(31 41 55); /* gray-800 */
}

.markdown-preview h3 {
  @apply text-xl font-bold mb-3 mt-5;
  color: rgb(55 65 81); /* gray-700 */
}

.markdown-preview h4 {
  @apply text-lg font-semibold mb-2 mt-4;
  color: rgb(75 85 99); /* gray-600 */
}

.markdown-preview h5 {
  @apply text-base font-semibold mb-2 mt-3;
  color: rgb(107 114 128); /* gray-500 */
}

.markdown-preview h6 {
  @apply text-sm font-semibold mb-2 mt-3;
  color: rgb(156 163 175); /* gray-400 */
}

/* 段落 */
.markdown-preview p {
  @apply mb-4 leading-7;
}

/* 链接 - 明显的颜色和下划线 */
.markdown-preview a {
  @apply text-blue-600 dark:text-blue-400 underline hover:text-blue-800 dark:hover:text-blue-300 transition-colors;
  @apply font-medium;
}

/* 列表 - 清晰的缩进和标记 */
.markdown-preview ul,
.markdown-preview ol {
  @apply mb-4 pl-6;
}

.markdown-preview ul {
  @apply list-disc;
}

.markdown-preview ul ul {
  @apply list-disc;
}

.markdown-preview ol {
  @apply list-decimal;
}

.markdown-preview li {
  @apply mb-2 leading-6;
}

.markdown-preview li > ul,
.markdown-preview li > ol {
  @apply mb-2;
}

/* 引用块 - 左侧边框和背景色 */
.markdown-preview blockquote {
  @apply border-l-4 border-gray-400 dark:border-gray-500 pl-4 py-2 mb-4;
  @apply bg-gray-100 dark:bg-gray-800;
  @apply italic text-gray-700 dark:text-gray-300;
}

.markdown-preview blockquote p {
  @apply mb-0;
}

/* 代码块 - 深色背景和等宽字体 */
.markdown-preview code {
  @apply px-2 py-1 rounded text-sm font-mono;
  @apply bg-gray-200 dark:bg-gray-700;
  @apply text-red-600 dark:text-red-400;
  @apply border border-gray-300 dark:border-gray-600;
}

.markdown-preview pre {
  @apply p-4 mb-4 rounded-lg overflow-x-auto;
  @apply bg-gray-900 dark:bg-gray-950;
  @apply border border-gray-700 dark:border-gray-800;
}

.markdown-preview pre code {
  @apply p-0 bg-transparent border-0;
  @apply text-gray-100 dark:text-gray-100;
}

/* 水平分割线 */
.markdown-preview hr {
  @apply border-t-2 border-gray-300 dark:border-gray-700 my-8;
}

/* 表格 - 清晰的边框和斑马纹 */
.markdown-preview table {
  @apply w-full border-collapse mb-4;
  @apply border border-gray-300 dark:border-gray-600;
}

.markdown-preview table thead {
  @apply bg-gray-100 dark:bg-gray-800;
}

.markdown-preview table th {
  @apply border border-gray-300 dark:border-gray-600 px-4 py-2;
  @apply font-semibold text-left text-sm;
  @apply text-gray-900 dark:text-gray-100;
}

.markdown-preview table td {
  @apply border border-gray-300 dark:border-gray-600 px-4 py-2;
  @apply text-sm;
}

.markdown-preview table tbody tr:nth-child(even) {
  @apply bg-gray-50 dark:bg-gray-800/50;
}

.markdown-preview table tbody tr:hover {
  @apply bg-gray-100 dark:bg-gray-800;
}

/* 图片 */
.markdown-preview img {
  @apply max-w-full h-auto rounded-lg shadow-md my-4;
  @apply border border-gray-200 dark:border-gray-700;
}

/* 强调文本 */
.markdown-preview strong {
  @apply font-bold text-gray-900 dark:text-gray-100;
}

.markdown-preview em {
  @apply italic;
}

/* 删除线 */
.markdown-preview del {
  @apply line-through text-gray-500 dark:text-gray-500;
}

/* 任务列表 */
.markdown-preview input[type="checkbox"] {
  @apply mr-2;
}

/* HTML 实体和特殊元素 */
.markdown-preview sup {
  @apply text-xs text-gray-500 dark:text-gray-400;
}

.markdown-preview sub {
  @apply text-xs text-gray-500 dark:text-gray-400;
}

/* 暗色模式下的标题颜色调整 */
.dark .markdown-preview h1 {
  color: rgb(243 244 246); /* gray-100 */
  border-color: rgb(75 85 99); /* gray-600 */
}

.dark .markdown-preview h2 {
  color: rgb(229 231 235); /* gray-200 */
  border-color: rgb(55 65 81); /* gray-700 */
}

.dark .markdown-preview h3 {
  color: rgb(209 213 219); /* gray-300 */
}

.dark .markdown-preview h4 {
  color: rgb(156 163 175); /* gray-400 */
}

.dark .markdown-preview h5 {
  color: rgb(156 163 175); /* gray-400 */
}

.dark .markdown-preview h6 {
  color: rgb(156 163 175); /* gray-400 */
}

.dark .markdown-preview blockquote {
  border-color: rgb(107 114 128); /* gray-500 */
}
